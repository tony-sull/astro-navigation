---
import type { MarkdownInstance } from 'astro'
import { fetchPages } from 'astro-navigation'
import Layout from '../layouts/Docs.astro'

export async function getStaticPaths() {
    const allPages = await fetchPages()

    const res = allPages.map((page) => {
        return {
            params: { slug: page.url?.replace(/^\//, '') },
            props: { page }
        }
    })

    return res
}

const { page } = Astro.props as { page: MarkdownInstance<{ title: string }> }
---

<Layout title={page.frontmatter.title}>
    <page.Content />
</Layout>