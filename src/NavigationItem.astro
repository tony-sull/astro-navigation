---
import type { HTMLAttributes, HTMLTag } from 'astro/types'
import NavigationList from './NavigationList.astro'
import type { Entry } from './utils.js'

export type Props<L extends HTMLTag = 'ol', I extends HTMLTag = 'li'> = Entry & {
    as?: I
    showExcerpt?: boolean
    disableCurrent?: boolean
    itemAttrs?: HTMLAttributes<I>
    listAttrs?: HTMLAttributes<L>
}

const { as: Component = 'li', children = [], title, url, disableCurrent, itemAttrs, listAttrs } = Astro.props

const current = url === Astro.url.pathname
---

<Component {...itemAttrs}>
    {
        current && disableCurrent ? (
            <span aria-current="page">{title}</span>
        ) : (
            <a href={url} aria-current={current ? 'page' : undefined}>
                {title}
            </a>
        )
    }
    {children.length > 0 && <NavigationList entries={children} {...listAttrs} />}
</Component>
